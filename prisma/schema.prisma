// Subscription model
model Subscription {
  id              String    @id @default(cuid())
  userId          String
  name            String
  category        String
  cost            Float
  billingCycle    String    // monthly, quarterly, yearly, etc.
  nextBillingDate DateTime
  usage           Int       // percentage of usage
  value           Int       // percentage of value
  paymentMethod   String
  autoRenew       Boolean   @default(true)
  notes           String?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  user            User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  payments        Payment[]

  @@index([userId])
}

// Bill model
model Bill {
  id              String    @id @default(cuid())
  userId          String
  name            String
  category        String
  amount          Float
  dueDate         DateTime
  isRecurring     Boolean   @default(false)
  frequency       String?   // monthly, quarterly, yearly, etc.
  paymentMethod   String
  status          String    @default("pending") // pending, paid, overdue
  notes           String?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  user            User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  payments        Payment[]

  @@index([userId])
}

// Payment model to track payment history
model Payment {
  id              String    @id @default(cuid())
  userId          String
  amount          Float
  date            DateTime
  status          String    // completed, pending, failed
  paymentMethod   String
  transactionId   String?
  subscriptionId  String?
  billId          String?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  user            User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  subscription    Subscription? @relation(fields: [subscriptionId], references: [id], onDelete: SetNull)
  bill            Bill?     @relation(fields: [billId], references: [id], onDelete: SetNull)

  @@index([userId])
  @@index([subscriptionId])
  @@index([billId])
} 